@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * BASE STYLES
 * Applied globally to ensure consistent rendering
 */

@layer base {
  /* Better box-sizing */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  /* Remove default margins */
  * {
    margin: 0;
  }

  /* Improve text rendering */
  body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  /* Improve media defaults */
  img,
  picture,
  video,
  canvas,
  svg {
    display: block;
    max-width: 100%;
  }

  /* Remove built-in form typography styles */
  input,
  button,
  textarea,
  select {
    font: inherit;
  }

  /* Avoid text overflows */
  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
  }

  /* Root stacking context */
  #root {
    isolation: isolate;
  }

  /* Focus visible for keyboard navigation */
  :focus-visible {
    outline: 2px solid theme('colors.blue.500');
    outline-offset: 2px;
  }

  /* Remove focus outline for mouse users */
  :focus:not(:focus-visible) {
    outline: none;
  }
}

/*
 * COMPONENT STYLES
 * Reusable component patterns using @apply
 */

@layer components {
  /* Form field base styles */
  .form-input {
    @apply w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm
           placeholder-gray-400
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
           disabled:bg-gray-100 disabled:cursor-not-allowed
           read-only:bg-gray-50;
  }

  /* Error state for inputs */
  .form-input-error {
    @apply border-error-500 focus:ring-error-500 focus:border-error-500;
  }

  /* Form label */
  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-1;
  }

  /* Required field indicator */
  .form-required {
    @apply text-error-500 ml-1;
  }

  /* Help text */
  .form-help-text {
    @apply mt-1 text-sm text-gray-500;
  }

  /* Error message */
  .form-error {
    @apply mt-1 text-sm text-error-600;
  }

  /* Primary button */
  .btn-primary {
    @apply inline-flex justify-center items-center px-4 py-2
           border border-transparent rounded-md shadow-sm
           text-sm font-medium text-white bg-blue-600
           hover:bg-blue-700
           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Secondary button */
  .btn-secondary {
    @apply inline-flex justify-center items-center px-4 py-2
           border border-gray-300 rounded-md shadow-sm
           text-sm font-medium text-gray-700 bg-white
           hover:bg-gray-50
           focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Card container */
  .form-section {
    @apply bg-white rounded-lg border border-gray-200 p-6 mb-6;
  }

  /* Section title */
  .form-section-title {
    @apply text-lg font-semibold text-gray-900 mb-4;
  }

  /* Loading spinner */
  .spinner {
    @apply animate-spin h-5 w-5 text-current;
  }
}

/*
 * UTILITY STYLES
 * Additional utilities not covered by Tailwind
 */

@layer utilities {
  /* Screen reader only - for accessibility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Focus ring for custom focus handling */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .form-input {
      @apply border-2 border-black;
    }
    
    .form-input:focus {
      @apply outline-2 outline-black;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
